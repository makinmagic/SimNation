{"contents":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Gift Code Redemption</title>\r\n    <link href=\"css/bootstrap.min.css\" rel=\"stylesheet\">\r\n\t<style>\r\n        .item-image {\r\n            margin-top: 20px;\r\n            height: 187px;\r\n            width: auto;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"container\">\r\n        <h1 class=\"mt-5\">Redeem Your Gift</h1>\r\n        <form id=\"giftForm\">\r\n            <div class=\"form-group\" id=\"codeStep\">\r\n                <label for=\"giftCode\">Enter your gift code</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"giftCode\" required>\r\n                <button type=\"button\" class=\"btn btn-primary mt-2\" onclick=\"validateCode()\">Validate Code</button>\r\n            </div>\r\n            <div class=\"form-group d-none\" id=\"nameStep\">\r\n                <label for=\"avatarName\">Enter your avatar name</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"avatarName\" required>\r\n                <button type=\"button\" class=\"btn btn-primary mt-2\" onclick=\"validateName()\">Validate Name</button>\r\n            </div>\r\n            <div class=\"form-group d-none\" id=\"giftStep\">\r\n                <label for=\"giftSelection\">Choose your gift</label>\r\n                <select class=\"form-control\" id=\"giftSelection\" required>\r\n\t\t\t\t\t<!-- value é o código decimal do objeto, ele deve ser acrescentado na lista de checagem server-side também -->\r\n                    <option value=\"430002131\" data-image=\"images/fairy.png\">Fairy Wings Trunk</option>\r\n                    <option value=\"1930670885\" data-image=\"images/mausoleum.png\">Goth Family Private Mausoleum</option>\r\n                    <option value=\"1528310837\" data-image=\"images/goldein_toilet.png\">Golden Toilet</option>\r\n                    <option value=\"1438789058\" data-image=\"images/magic_table.png\">Magic Table</option>\r\n                    <option value=\"3761594258\" data-image=\"images/spin_the_bottle.png\">Spin The Bottle</option>\r\n                    <option value=\"1004241556\" data-image=\"images/simmy_the_founder.png\">Simmy - The Founder</option>\r\n                    <option value=\"477669820\" data-image=\"images/silver_cat.png\">Silver Cat Sculpture</option>\r\n                    <option value=\"1295762813\" data-image=\"images/cotton_candy_machine_red.png\">Cotton Candy Machine (Red)</option>\r\n                    <option value=\"217488443\" data-image=\"images/cotton_candy_machine_pink.png\">Cotton Candy Machine (Pink)</option>\r\n                    <option value=\"1168872189\" data-image=\"images/icetopia_shaving_machine.png\">Icetopia Shaving Machine</option>\r\n                    <option value=\"4040797823\" data-image=\"images/campfire.png\">Campfire</option>\r\n                    <option value=\"341423637\" data-image=\"images/blue_cannon.png\">Blue Cannon</option>\r\n                    <option value=\"341423777\" data-image=\"images/green_cannon.png\">Green Cannon</option>\r\n                    <option value=\"341423567\" data-image=\"images/red_cannon.png\">Red Cannon</option>\r\n                    <option value=\"341423707\" data-image=\"images/yellow_cannon.png\">Yellow Cannon</option>\r\n                    <option value=\"1209707198\" data-image=\"images/mystic_tree_apple.png\">Mystic Tree (Apple)</option>\r\n                    <option value=\"1209671968\" data-image=\"images/mystic_tree_orange.png\">Mystic Tree (Orange)</option>\r\n                    <option value=\"312222258\" data-image=\"images/the_grim_reaper.png\">The Grim Reaper</option>\r\n                    <option value=\"3481920635\" data-image=\"images/bean_tree.png\">Bean Tree</option>\r\n                    <option value=\"3241737132\" data-image=\"images/garden_gnome_pet.gif\">Garden Gnome Pet</option>\r\n                    <option value=\"903766756\" data-image=\"images/gnome_statue.png\">Gnome Statue</option>\r\n                    <option value=\"1310398231\" data-image=\"images/cow_plant.gif\">Cow Plant</option>\r\n                    <option value=\"54373623\" data-image=\"images/mini_ghost.png\">Pet Ghost (random color)</option>\r\n                    <option value=\"1234733558\" data-image=\"images/magic_pink_mirror.png\">Magic Pink Mirror</option>\r\n                    <option value=\"1168320904\" data-image=\"images/book_of_curses.png\">Book of Curses</option>\r\n                    <option value=\"257651368\" data-image=\"images/magic_crystal.png\">Magic Crystal</option>\r\n                    <option value=\"1439082688\" data-image=\"images/gingerbread_man.png\">Gingerbread Man</option>\r\n                    <option value=\"1084257137\" data-image=\"images/blue_christmas_sleigh.png\">Blue Christmas Sleigh</option>\r\n                    <option value=\"2214257137\" data-image=\"images/white_christmas_sleigh.png\">White Christmas Sleigh</option>\r\n                    <option value=\"3173842033\" data-image=\"images/orange_christmas_sleigh.png\">Orange Christmas Sleigh</option>\r\n                    <option value=\"1245257137\" data-image=\"images/black_christmas_sleigh.png\">Black Christmas Sleigh</option>\r\n                    <option value=\"1663257137\" data-image=\"images/purple_christmas_sleigh.png\">Purple Christmas Sleigh</option>\r\n                    <option value=\"1352692593\" data-image=\"images/green_christmas_sleigh.png\">Green Christmas Sleigh</option>\r\n                    <option value=\"1664257137\" data-image=\"images/red_christmas_sleigh.png\">Red Christmas Sleigh</option>\r\n                    <option value=\"1339322545\" data-image=\"images/pink_christmas_sleigh.png\">Pink Christmas Sleigh</option>\r\n                </select>\r\n\t\t\t\t<img id=\"itemImage\" class=\"item-image d-none\" src=\"\" alt=\"Item Image\">\r\n\t\t\t\t<br><br>\r\n                <button type=\"button\" class=\"btn btn-primary mt-2\" onclick=\"redeemGift()\">Redeem Gift</button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n\r\n    <!-- Modal -->\r\n    <div class=\"modal fade\" id=\"messageModal\" tabindex=\"-1\" aria-labelledby=\"messageModalLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"messageModalLabel\">Message</h5>\r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\" id=\"modalMessage\">\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <script src=\"js/jquery-3.5.1.min.js\"></script>\r\n    <script src=\"js/bootstrap.bundle.min.js\"></script>\r\n\t<script>\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            var giftSelection = document.getElementById('giftSelection');\r\n            var firstOption = giftSelection.options[giftSelection.selectedIndex];\r\n            var imageUrl = firstOption.getAttribute('data-image');\r\n            var itemImage = document.getElementById('itemImage');\r\n\r\n            if (imageUrl) {\r\n                itemImage.src = imageUrl;\r\n                itemImage.classList.remove('d-none');\r\n            }\r\n\r\n            giftSelection.addEventListener('change', function() {\r\n                var selectedOption = this.options[this.selectedIndex];\r\n                var imageUrl = selectedOption.getAttribute('data-image');\r\n                \r\n                if (imageUrl) {\r\n                    itemImage.src = imageUrl;\r\n                    itemImage.classList.remove('d-none');\r\n                } else {\r\n                    itemImage.classList.add('d-none');\r\n                }\r\n            });\r\n        });\r\n    </script>\r\n\t<!-- Script para Troca da Imagem -->\r\n\t<script>\r\n        document.getElementById('giftSelection').addEventListener('change', function() {\r\n            var selectedOption = this.options[this.selectedIndex];\r\n            var imageUrl = selectedOption.getAttribute('data-image');\r\n            var itemImage = document.getElementById('itemImage');\r\n\r\n            if (imageUrl) {\r\n                itemImage.src = imageUrl;\r\n                itemImage.classList.remove('d-none');\r\n            } else {\r\n                itemImage.classList.add('d-none');\r\n            }\r\n        });\r\n    </script>\r\n    <script>\r\n        function showMessage(message) {\r\n            $('#modalMessage').text(message);\r\n            $('#messageModal').modal('show');\r\n        }\r\n\r\n        function validateCode() {\r\n            let code = $('#giftCode').val();\r\n            $.post('validate_code.php', { code: code }, function(response) {\r\n                if (response.valid) {\r\n                    $('#codeStep').addClass('d-none');\r\n                    $('#nameStep').removeClass('d-none');\r\n                } else {\r\n                    showMessage(response.message);\r\n                }\r\n            }, 'json');\r\n        }\r\n\r\n        function validateName() {\r\n            let name = $('#avatarName').val();\r\n            $.post('validate_name.php', { name: name }, function(response) {\r\n                if (response.valid) {\r\n                    $('#nameStep').addClass('d-none');\r\n                    $('#giftStep').removeClass('d-none');\r\n                } else {\r\n                    showMessage(response.message);\r\n                }\r\n            }, 'json');\r\n        }\r\n\r\n        function redeemGift() {\r\n            let code = $('#giftCode').val();\r\n            let name = $('#avatarName').val();\r\n            let gift = $('#giftSelection').val();\r\n            $.post('redeem_gift.php', { code: code, name: name, gift: gift }, function(response) {\r\n                if (response.success) {\r\n                    showMessage('Gift redeemed successfully, just relog!');\r\n                } else {\r\n                    showMessage(response.message);\r\n                }\r\n            }, 'json');\r\n        }\r\n    </script>\r\n</body>\r\n</html>\r\n","status":{"url":"http://simnationserver.com/redeem/","content_type":"text/html; charset=UTF-8","http_code":200,"response_time":153,"content_length":10076}}